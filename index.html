<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Babu Ne Thana Thaya</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 10px; }
        .container { max-width: 600px; margin: 0 auto; background: white; border-radius: 15px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        h1 { text-align: center; color: #667eea; margin-bottom: 5px; font-size: 28px; }
        .visitor { text-align: center; color: #667eea; font-size: 12px; margin-bottom: 20px; font-weight: bold; }
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #e0e0e0; }
        .tab { flex: 1; padding: 12px; text-align: center; cursor: pointer; background: none; border: none; font-weight: bold; color: #666; border-bottom: 3px solid transparent; }
        .tab.active { color: #667eea; border-bottom-color: #667eea; }
        .content { display: none; }
        .content.active { display: block; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #333; font-weight: bold; font-size: 14px; }
        input, select, textarea { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px; font-family: Arial, sans-serif; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #667eea; }
        button { width: 100%; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 20px; }
        .result { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 20px; display: none; }
        .score-box { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; text-align: center; margin-bottom: 20px; }
        .score-box h2 { font-size: 48px; }
        .metric { background: white; padding: 12px; margin-bottom: 10px; border-radius: 8px; border-left: 4px solid #667eea; }
        .title { font-size: 16px; font-weight: bold; color: #667eea; margin: 15px 0 10px 0; }
        .food-analyzer { background: #fff3cd; padding: 15px; border-radius: 8px; margin: 15px 0; border: 2px dashed #ff9800; }
        .food-result { background: #e8f5e9; padding: 15px; border-radius: 8px; margin-top: 10px; display: none; }
        .food-result.show { display: block; }
        .nutrition-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 10px 0; }
        .nutrition-box { background: #f0f0f0; padding: 10px; border-radius: 6px; text-align: center; }
        .nutrition-box strong { display: block; font-size: 20px; color: #667eea; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üí™ Babu Ne Thana Thaya</h1>
        <div class="visitor">üë• Visitors: <span id="count">0</span></div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('profile')">üë§ Profile</button>
            <button class="tab" onclick="showTab('daily')">üìù Daily</button>
            <button class="tab" onclick="showTab('analytics')">üìä Analytics</button>
        </div>

        <!-- PROFILE TAB -->
        <div id="profile" class="content active">
            <h2 style="color: #667eea; margin-bottom: 15px;">Create Your Profile</h2>
            <form id="profileForm">
                <div class="input-group">
                    <label>Gender</label>
                    <select id="gender" required>
                        <option value="">Select</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Height (cm)</label>
                    <input type="number" id="height" placeholder="e.g., 183" required>
                </div>
                <div class="input-group">
                    <label>Weight (kg)</label>
                    <input type="number" id="weight" placeholder="e.g., 87" required>
                </div>
                <div class="input-group">
                    <label>Target Weight (kg)</label>
                    <input type="number" id="targetWeight" placeholder="e.g., 75" required>
                </div>
                <div class="input-group">
                    <label>Age (years)</label>
                    <input type="number" id="age" placeholder="e.g., 25" required>
                </div>
                <div class="input-group">
                    <label>Activity Level</label>
                    <select id="activity" required>
                        <option value="">Select</option>
                        <option value="light">Light (1-3 days/week)</option>
                        <option value="moderate">Moderate (3-5 days/week)</option>
                        <option value="active">Active (6-7 days/week)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Goal</label>
                    <select id="goal" required>
                        <option value="">Select</option>
                        <option value="loss">Weight Loss</option>
                        <option value="gain">Muscle Gain</option>
                        <option value="maintain">Maintenance</option>
                    </select>
                </div>
                <div id="targets" style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0; border: 2px solid #667eea; display: none;">
                    <h4 style="color: #667eea; margin-bottom: 10px;">Your Nutrition Targets</h4>
                    <div style="font-size: 14px;">
                        <div style="margin: 5px 0;">Calories: <strong id="cal">-</strong></div>
                        <div style="margin: 5px 0;">Protein: <strong id="prot">-</strong></div>
                        <div style="margin: 5px 0;">Carbs: <strong id="carb">-</strong></div>
                        <div style="margin: 5px 0;">Fats: <strong id="fat">-</strong></div>
                    </div>
                </div>
                <button type="submit">‚úÖ Save & Next ‚Üí</button>
            </form>
        </div>

        <!-- DAILY TAB -->
        <div id="daily" class="content">
            <h2 style="color: #667eea; margin-bottom: 15px;">Daily Tracking</h2>
            <div id="warning" style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px; display: none;">
                <p style="color: #856404; font-weight: bold;">‚ö†Ô∏è Complete profile first!</p>
                <button onclick="showTab('profile')" style="margin-top: 10px;">‚Üê Go Back</button>
            </div>

            <form id="trackerForm">
                <div class="food-analyzer">
                    <h3 style="color: #ff9800; margin-bottom: 10px;">üçΩÔ∏è What did you eat?</h3>
                    <textarea id="foodList" placeholder="e.g., 2 eggs, 1 cup oats, banana, 1 roti, dal" style="margin-bottom: 10px;"></textarea>
                    <button type="button" onclick="analyzeFood()" style="background: #28a745; margin-top: 10px;">üîç Analyze Food</button>
                    <div id="foodRes" class="food-result">
                        <h4>Nutrition Found:</h4>
                        <div class="nutrition-grid">
                            <div class="nutrition-box">
                                <span>Calories</span>
                                <strong id="fcal">0</strong>
                            </div>
                            <div class="nutrition-box">
                                <span>Protein</span>
                                <strong id="fprot">0</strong>
                            </div>
                            <div class="nutrition-box">
                                <span>Carbs</span>
                                <strong id="fcarb">0</strong>
                            </div>
                            <div class="nutrition-box">
                                <span>Fats</span>
                                <strong id="ffat">0</strong>
                            </div>
                        </div>
                        <button type="button" onclick="useFoodData()" style="background: #17a2b8;">‚úÖ Use These</button>
                    </div>
                </div>

                <div class="title">Or Enter Manually</div>

                <div class="input-group">
                    <label>Calories (kcal)</label>
                    <input type="number" id="cal_input" placeholder="1850" required>
                </div>
                <div class="input-group">
                    <label>Protein (g)</label>
                    <input type="number" id="prot_input" placeholder="165" required>
                </div>
                <div class="input-group">
                    <label>Carbs (g)</label>
                    <input type="number" id="carb_input" placeholder="140" required>
                </div>
                <div class="input-group">
                    <label>Fats (g)</label>
                    <input type="number" id="fat_input" placeholder="50" required>
                </div>
                <div class="input-group">
                    <label>Water (liters)</label>
                    <input type="number" step="0.1" id="water_input" placeholder="3.5" required>
                </div>
                <div class="input-group">
                    <label>Sleep (hours)</label>
                    <input type="number" step="0.5" id="sleep_input" placeholder="7.5" required>
                </div>
                <div class="input-group">
                    <label>Workout (Yes/No)</label>
                    <select id="workout_input" required>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Workout Duration (min)</label>
                    <input type="number" id="duration_input" placeholder="45">
                </div>
                <div class="input-group">
                    <label>Study Time (hours)</label>
                    <input type="number" step="0.5" id="study_input" placeholder="3" required>
                </div>

                <div class="title">Mood & Energy</div>
                <div class="input-group">
                    <label>Mood (1-10)</label>
                    <input type="range" id="mood_input" min="1" max="10" value="5" style="padding: 0; height: 8px;">
                    <div style="text-align: center; color: #667eea; font-weight: bold; margin-top: 5px;" id="moodVal">5</div>
                </div>
                <div class="input-group">
                    <label>Stress (1-10)</label>
                    <input type="range" id="stress_input" min="1" max="10" value="5" style="padding: 0; height: 8px;">
                    <div style="text-align: center; color: #667eea; font-weight: bold; margin-top: 5px;" id="stressVal">5</div>
                </div>
                <div class="input-group">
                    <label>Energy (1-10)</label>
                    <input type="range" id="energy_input" min="1" max="10" value="5" style="padding: 0; height: 8px;">
                    <div style="text-align: center; color: #667eea; font-weight: bold; margin-top: 5px;" id="energyVal">5</div>
                </div>

                <button type="submit">üöÄ Analyze My Day</button>
            </form>

            <div id="result" class="result"></div>
        </div>

        <!-- ANALYTICS TAB -->
        <div id="analytics" class="content">
            <h2 style="color: #667eea; margin-bottom: 15px;">Analytics</h2>
            <p style="color: #666; text-align: center; padding: 40px;">üìä Coming soon! Track more days to see your progress graphs.</p>
        </div>
    </div>

    <script>
        const foodDB = {
            'egg': {c: 78, p: 6, cb: 0.6, f: 5},
            'oats': {c: 389, p: 17, cb: 67, f: 7},
            'banana': {c: 105, p: 1.3, cb: 27, f: 0.3},
            'roti': {c: 71, p: 3, cb: 15, f: 0.4},
            'chicken': {c: 165, p: 31, cb: 0, f: 3.6},
            'rice': {c: 130, p: 2.7, cb: 28, f: 0.3},
            'dal': {c: 101, p: 9, cb: 18, f: 0.3},
            'paneer': {c: 265, p: 18, cb: 1.2, f: 20}
        };

        document.getElementById('mood_input').addEventListener('input', e => document.getElementById('moodVal').textContent = e.target.value);
        document.getElementById('stress_input').addEventListener('input', e => document.getElementById('stressVal').textContent = e.target.value);
        document.getElementById('energy_input').addEventListener('input', e => document.getElementById('energyVal').textContent = e.target.value);

        window.onload = () => {
            updateVisitors();
            loadProfile();
            document.getElementById('profileForm').addEventListener('submit', saveProfile);
            document.getElementById('trackerForm').addEventListener('submit', submitTracker);
        };

        function updateVisitors() {
            let v = localStorage.getItem('v') || 0;
            v = parseInt(v) + 1;
            localStorage.setItem('v', v);
            document.getElementById('count').textContent = v;
        }

        function showTab(t) {
            document.querySelectorAll('.content').forEach(x => x.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
            document.getElementById(t).classList.add('active');
            event.target.classList.add('active');
            
            if (t === 'daily') checkProfile();
        }

        function loadProfile() {
            const p = localStorage.getItem('p');
            if (p) {
                const obj = JSON.parse(p);
                document.getElementById('gender').value = obj.g;
                document.getElementById('height').value = obj.h;
                document.getElementById('weight').value = obj.w;
                document.getElementById('targetWeight').value = obj.tw;
                document.getElementById('age').value = obj.a;
                document.getElementById('activity').value = obj.ac;
                document.getElementById('goal').value = obj.go;
            }
        }

        function saveProfile(e) {
            e.preventDefault();
            
            const g = document.getElementById('gender').value;
            const h = parseFloat(document.getElementById('height').value);
            const w = parseFloat(document.getElementById('weight').value);
            const a = parseInt(document.getElementById('age').value);
            const ac = document.getElementById('activity').value;
            const go = document.getElementById('goal').value;

            let bmr = g === 'male' ? (10*w) + (6.25*h) - (5*a) + 5 : (10*w) + (6.25*h) - (5*a) - 161;
            const mult = {light: 1.375, moderate: 1.55, active: 1.725};
            let cal = bmr * (mult[ac] || 1.55);
            
            if (go === 'loss') cal -= 500;
            else if (go === 'gain') cal += 300;

            const prot = g === 'male' ? w * 2 : w * 1.6;
            const fats = (cal * 0.25) / 9;
            const carbs = (cal - (prot * 4) - (fats * 9)) / 4;

            localStorage.setItem('p', JSON.stringify({
                g, h, w, tw: document.getElementById('targetWeight').value, a, ac, go,
                cal: Math.round(cal), prot: Math.round(prot), carbs: Math.round(carbs), fats: Math.round(fats)
            }));

            document.getElementById('cal').textContent = Math.round(cal);
            document.getElementById('prot').textContent = Math.round(prot);
            document.getElementById('carb').textContent = Math.round(carbs);
            document.getElementById('fat').textContent = Math.round(fats);
            document.getElementById('targets').style.display = 'block';

            setTimeout(() => {
                document.querySelectorAll('.content').forEach(x => x.classList.remove('active'));
                document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
                document.getElementById('daily').classList.add('active');
                document.querySelectorAll('.tab')[1].classList.add('active');
            }, 500);
        }

        function checkProfile() {
            if (!localStorage.getItem('p')) {
                document.getElementById('warning').style.display = 'block';
            } else {
                document.getElementById('warning').style.display = 'none';
            }
        }

        function analyzeFood() {
            const foods = document.getElementById('foodList').value.toLowerCase().split(',');
            let tc = 0, tp = 0, tcb = 0, tf = 0;

            foods.forEach(f => {
                const qty = (f.match(/\d+/) || [1])[0] || 1;
                for (let k in foodDB) {
                    if (f.includes(k)) {
                        tc += foodDB[k].c * qty / 100;
                        tp += foodDB[k].p * qty / 100;
                        tcb += foodDB[k].cb * qty / 100;
                        tf += foodDB[k].f * qty / 100;
                        break;
                    }
                }
            });

            document.getElementById('fcal').textContent = Math.round(tc);
            document.getElementById('fprot').textContent = Math.round(tp);
            document.getElementById('fcarb').textContent = Math.round(tcb);
            document.getElementById('ffat').textContent = Math.round(tf);
            document.getElementById('foodRes').classList.add('show');
        }

        function useFoodData() {
            document.getElementById('cal_input').value = document.getElementById('fcal').textContent;
            document.getElementById('prot_input').value = document.getElementById('fprot').textContent;
            document.getElementById('carb_input').value = document.getElementById('fcarb').textContent;
            document.getElementById('fat_input').value = document.getElementById('ffat').textContent;
            alert('‚úÖ Food data added!');
        }

        function submitTracker(e) {
            e.preventDefault();

            const cal = parseFloat(document.getElementById('cal_input').value);
            const prot = parseFloat(document.getElementById('prot_input').value);
            const mood = parseInt(document.getElementById('mood_input').value);
            const stress = parseInt(document.getElementById('stress_input').value);
            const energy = parseInt(document.getElementById('energy_input').value);
            const wo = document.getElementById('workout_input').value === 'yes';

            let score = (mood * 10 + (11 - stress) * 10 + energy * 10) / 3;
            if (wo) score += 20;

            const html = `
                <div class="score-box">
                    <h2>${Math.round(score)}/100</h2>
                    <p>Today's Score</p>
                </div>
                <div class="title">üìä Nutrition</div>
                <div class="metric">üçΩÔ∏è Calories: ${cal} kcal</div>
                <div class="metric">üí™ Protein: ${prot}g</div>
                <div class="metric">üçö Carbs: ${document.getElementById('carb_input').value}g</div>
                <div class="metric">ü•ë Fats: ${document.getElementById('fat_input').value}g</div>
                <div class="title">üß† Mental</div>
                <div class="metric">üòä Mood: ${mood}/10 | üò∞ Stress: ${stress}/10 | ‚ö° Energy: ${energy}/10</div>
                <div class="title">üí™ Fitness</div>
                <div class="metric">üèãÔ∏è Workout: ${wo ? '‚úÖ Yes (' + document.getElementById('duration_input').value + ' min)' : '‚ùå No'}</div>
                <div class="metric">üìö Study: ${document.getElementById('study_input').value} hours</div>
            `;

            document.getElementById('result').innerHTML = html;
            document.getElementById('result').style.display = 'block';
            document.getElementById('trackerForm').reset();
            document.getElementById('result').scrollIntoView({behavior: 'smooth'});
        }
    </script>
</body>
</html>
