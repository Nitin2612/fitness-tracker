<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness & Study Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }
        
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 24px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.2s;
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        .btn-small {
            padding: 10px;
            margin: 5px;
            font-size: 14px;
        }
        
        .btn-share { background: #28a745; }
        .btn-download { background: #17a2b8; }
        .btn-clear { background: #dc3545; }
        
        .results {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }
        
        .score-box {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .score-box h2 {
            font-size: 48px;
            margin-bottom: 5px;
        }
        
        .score-box p {
            font-size: 18px;
        }
        
        .metric {
            background: white;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .metric-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 5px;
        }
        
        .status-perfect { background: #d4edda; color: #155724; }
        .status-good { background: #fff3cd; color: #856404; }
        .status-poor { background: #f8d7da; color: #721c24; }
        
        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
            margin: 20px 0 10px 0;
        }
        
        .achievement {
            background: #d4edda;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
            color: #155724;
        }
        
        .improvement {
            background: #fff3cd;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
            color: #856404;
        }
        
        .day-info {
            text-align: center;
            color: #666;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
            background: white;
            padding: 15px;
            border-radius: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
        }
        
        .no-data {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn-group button {
            flex: 1;
            min-width: 120px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Fitness & Study Tracker</h1>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('tracker')">üìù Tracker</button>
            <button class="tab" onclick="switchTab('analytics')">üìä Analytics</button>
        </div>
        
        <!-- TRACKER TAB -->
        <div id="tracker" class="tab-content active">
            <div class="day-info" id="dayInfo"></div>
            
            <div class="btn-group">
                <button onclick="shareApp()" class="btn btn-small btn-share">üì§ Share</button>
                <button onclick="saveReport()" class="btn btn-small btn-download">üíæ Report</button>
                <button onclick="clearData()" class="btn btn-small btn-clear">üóëÔ∏è Clear Data</button>
            </div>
            
            <form id="trackerForm">
                <div class="input-group">
                    <label>üçΩÔ∏è Calories (kcal)</label>
                    <input type="number" id="calories" placeholder="e.g., 1850" required>
                </div>
                
                <div class="input-group">
                    <label>üí™ Protein (g)</label>
                    <input type="number" id="protein" placeholder="e.g., 165" required>
                </div>
                
                <div class="input-group">
                    <label>üçö Carbs (g)</label>
                    <input type="number" id="carbs" placeholder="e.g., 140" required>
                </div>
                
                <div class="input-group">
                    <label>ü•ë Fats (g)</label>
                    <input type="number" id="fats" placeholder="e.g., 50" required>
                </div>
                
                <div class="input-group">
                    <label>üíß Water (liters)</label>
                    <input type="number" step="0.1" id="water" placeholder="e.g., 3.5" required>
                </div>
                
                <div class="input-group">
                    <label>üò¥ Sleep (hours)</label>
                    <input type="number" step="0.5" id="sleep" placeholder="e.g., 7.5" required>
                </div>
                
                <div class="input-group">
                    <label>üèãÔ∏è Workout Completed?</label>
                    <select id="workout">
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>üìö Study Time (hours)</label>
                    <input type="number" step="0.5" id="study" placeholder="e.g., 3" required>
                </div>
                
                <button type="submit" class="btn">Analyze Progress</button>
            </form>
            
            <div class="results" id="results"></div>
        </div>
        
        <!-- ANALYTICS TAB -->
        <div id="analytics" class="tab-content">
            <div id="analyticsContent"></div>
        </div>
    </div>

    <script>
        const goals = {
            calories: { min: 1800, max: 2000, target: 1900 },
            protein: { min: 160, max: 180, target: 170 },
            carbs: { min: 130, max: 150, target: 140 },
            fats: { min: 45, max: 55, target: 50 },
            water: { target: 3.5 },
            sleep: { min: 7, max: 8, target: 7.5 },
            study: { target: 3 }
        };

        const workoutSchedule = {
            'Monday': 'Full Body Strength + Cardio',
            'Tuesday': 'Abs + HIIT',
            'Wednesday': 'Upper Body',
            'Thursday': 'Abs + Core',
            'Friday': 'Leg Day + Cardio',
            'Saturday': 'HIIT + Abs',
            'Sunday': 'Active Rest'
        };

        const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        const today = days[new Date().getDay()];
        
        document.getElementById('dayInfo').textContent = 
            `üìÖ ${new Date().toLocaleDateString()} (${today}) | Expected: ${workoutSchedule[today]}`;

        let charts = {};

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tab).classList.add('active');
            
            if (tab === 'analytics') {
                renderAnalytics();
            }
        }

        function calculateScore(value, goal) {
            if (goal.min && goal.max) {
                if (value >= goal.min && value <= goal.max) return { score: 100, status: 'perfect', msg: '‚úÖ Perfect!' };
                if (value < goal.min) {
                    const deficit = ((goal.min - value) / goal.min) * 100;
                    if (deficit <= 10) return { score: 85, status: 'good', msg: '‚ö†Ô∏è Slightly low' };
                    if (deficit <= 20) return { score: 70, status: 'good', msg: '‚ö†Ô∏è Below target' };
                    return { score: 50, status: 'poor', msg: '‚ùå Too low' };
                }
                const excess = ((value - goal.max) / goal.max) * 100;
                if (excess <= 10) return { score: 85, status: 'good', msg: '‚ö†Ô∏è Slightly high' };
                if (excess <= 20) return { score: 70, status: 'good', msg: '‚ö†Ô∏è Above target' };
                return { score: 50, status: 'poor', msg: '‚ùå Too high' };
            }
            const percentage = (value / goal.target) * 100;
            if (percentage >= 100) return { score: 100, status: 'perfect', msg: '‚úÖ Excellent!' };
            if (percentage >= 80) return { score: percentage, status: 'good', msg: '‚ö†Ô∏è Almost there' };
            return { score: percentage, status: 'poor', msg: '‚ùå Needs work' };
        }

        document.getElementById('trackerForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const data = {
                date: new Date().toISOString(),
                calories: parseFloat(document.getElementById('calories').value),
                protein: parseFloat(document.getElementById('protein').value),
                carbs: parseFloat(document.getElementById('carbs').value),
                fats: parseFloat(document.getElementById('fats').value),
                water: parseFloat(document.getElementById('water').value),
                sleep: parseFloat(document.getElementById('sleep').value),
                workout: document.getElementById('workout').value === 'yes',
                study: parseFloat(document.getElementById('study').value)
            };

            let totalScore = 0;
            let achievements = [];
            let improvements = [];
            let html = '';

            const calScore = calculateScore(data.calories, goals.calories);
            const protScore = calculateScore(data.protein, goals.protein);
            const carbScore = calculateScore(data.carbs, goals.carbs);
            const fatScore = calculateScore(data.fats, goals.fats);
            const waterScore = calculateScore(data.water, goals.water);
            const sleepScore = calculateScore(data.sleep, goals.sleep);
            const studyScore = calculateScore(data.study, goals.study);
            const workoutScore = data.workout ? 100 : 0;

            totalScore = (calScore.score + protScore.score + carbScore.score + fatScore.score + 
                         waterScore.score + sleepScore.score + studyScore.score + workoutScore) / 8;

            data.score = totalScore;

            if (calScore.score === 100) achievements.push('Perfect calorie intake!');
            if (protScore.score === 100) achievements.push('Excellent protein intake!');
            if (waterScore.score >= 90) achievements.push('Great hydration!');
            if (data.workout) achievements.push('Completed workout!');
            if (studyScore.score >= 100) achievements.push('Excellent study dedication!');

            if (calScore.score < 70) improvements.push('Adjust calorie intake');
            if (protScore.score < 70) improvements.push('Increase protein (eggs, paneer, chicken)');
            if (waterScore.score < 90) improvements.push(`Drink ${(goals.water.target - data.water).toFixed(1)}L more water`);
            if (sleepScore.score < 70) improvements.push('Get more sleep (7-8 hours)');
            if (!data.workout) improvements.push('Complete your workout');
            if (studyScore.score < 80) improvements.push(`Study ${(goals.study.target - data.study).toFixed(1)} more hours`);

            let grade, emoji;
            if (totalScore >= 90) { grade = 'A+'; emoji = 'üåü'; }
            else if (totalScore >= 80) { grade = 'A'; emoji = 'üéâ'; }
            else if (totalScore >= 70) { grade = 'B'; emoji = 'üëç'; }
            else if (totalScore >= 60) { grade = 'C'; emoji = 'üòê'; }
            else { grade = 'D'; emoji = 'üòü'; }

            html = `
                <div class="score-box">
                    <h2>${totalScore.toFixed(0)}/100</h2>
                    <p>Grade: ${grade} ${emoji}</p>
                </div>

                <div class="section-title">üìä Detailed Metrics</div>
                <div class="metric">
                    <div class="metric-title">üçΩÔ∏è Calories: ${data.calories}/${goals.calories.target} kcal
                        <span class="status status-${calScore.status}">${calScore.msg}</span>
                    </div>
                </div>
                <div class="metric">
                    <div class="metric-title">üí™ Protein: ${data.protein}g/${goals.protein.target}g
                        <span class="status status-${protScore.status}">${protScore.msg}</span>
                    </div>
                </div>
                <div class="metric">
                    <div class="metric-title">üçö Carbs: ${data.carbs}g/${goals.carbs.target}g
                        <span class="status status-${carbScore.status}">${carbScore.msg}</span>
                    </div>
                </div>
                <div class="metric">
                    <div class="metric-title">ü•ë Fats: ${data.fats}g/${goals.fats.target}g
                        <span class="status status-${fatScore.status}">${fatScore.msg}</span>
                    </div>
                </div>
                <div class="metric">
                    <div class="metric-title">üíß Water: ${data.water}L/${goals.water.target}L
                        <span class="status status-${waterScore.status}">${waterScore.msg}</span>
                    </div>
                </div>
                <div class="metric">
                    <div class="metric-title">üò¥ Sleep: ${data.sleep}hrs/${goals.sleep.target}hrs
                        <span class="status status-${sleepScore.status}">${sleepScore.msg}</span>
                    </div>
                </div>
                <div class="metric">
                    <div class="metric-title">üèãÔ∏è Workout: ${data.workout ? 'Completed ‚úÖ' : 'Not Done ‚ùå'}</div>
                </div>
                <div class="metric">
                    <div class="metric-title">üìö Study: ${data.study}hrs/${goals.study.target}hrs
                        <span class="status status-${studyScore.status}">${studyScore.msg}</span>
                    </div>
                </div>
            `;

            if (achievements.length > 0) {
                html += '<div class="section-title">üèÜ Achievements</div>';
                achievements.forEach(a => html += `<div class="achievement">‚úì ${a}</div>`);
            }

            if (improvements.length > 0) {
                html += '<div class="section-title">‚ö†Ô∏è Areas to Improve</div>';
                improvements.forEach(i => html += `<div class="improvement">‚Ä¢ ${i}</div>`);
            }

            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });

            const history = JSON.parse(localStorage.getItem('progressHistory') || '[]');
            history.push(data);
            localStorage.setItem('progressHistory', JSON.stringify(history.slice(-30)));
        });

        function renderAnalytics() {
            const history = JSON.parse(localStorage.getItem('progressHistory') || '[]');
            const analyticsDiv = document.getElementById('analyticsContent');
            
            if (history.length === 0) {
                analyticsDiv.innerHTML = '<div class="no-data">üìä No data yet! Start tracking to see analytics.</div>';
                return;
            }

            const last7Days = history.slice(-7);
            const dates = last7Days.map(d => new Date(d.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));

            // Stats Cards
            const avgScore = (history.reduce((sum, d) => sum + d.score, 0) / history.length).toFixed(0);
            const workoutStreak = calculateStreak(history);
            const totalDays = history.length;
            const bestScore = Math.max(...history.map(d => d.score)).toFixed(0);

            let html = `
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Average Score</div>
                        <div class="stat-value">${avgScore}%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Workout Streak</div>
                        <div class="stat-value">${workoutStreak} üî•</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Days</div>
                        <div class="stat-value">${totalDays}</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Best Score</div>
                        <div class="stat-value">${bestScore}%</div>
                    </div>
                </div>

                <div class="section-title">üìà Overall Score Trend (Last 7 Days)</div>
                <div class="chart-container">
                    <canvas id="scoreChart"></canvas>
                </div>

                <div class="section-title">üçΩÔ∏è Nutrition Trends</div>
                <div class="chart-container">
                    <canvas id="nutritionChart"></canvas>
                </div>

                <div class="section-title">üíß Hydration & Sleep</div>
                <div class="chart-container">
                    <canvas id="healthChart"></canvas>
                </div>

                <div class="section-title">üìö Study & Workout Consistency</div>
                <div class="chart-container">
                    <canvas id="consistencyChart"></canvas>
                </div>
            `;

            analyticsDiv.innerHTML = html;

            // Destroy old charts
            Object.values(charts).forEach(chart => chart.destroy());
            charts = {};

            // Score Trend Chart
            charts.score = new Chart(document.getElementById('scoreChart'), {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [{
                        label: 'Daily Score',
                        data: last7Days.map(d => d.score),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });

            // Nutrition Chart
            charts.nutrition = new Chart(document.getElementById('nutritionChart'), {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [
                        {
                            label: 'Calories',
                            data: last7Days.map(d => d.calories),
                            borderColor: '#ff6384',
                            tension: 0.4
                        },
                        {
                            label: 'Protein (g)',
                            data: last7Days.map(d => d.protein),
                            borderColor: '#36a2eb',
                            tension: 0.4
                        },
                        {
                            label: 'Carbs (g)',
                            data: last7Days.map(d => d.carbs),
                            borderColor: '#ffce56',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });

            // Health Chart
            charts.health = new Chart(document.getElementById('healthChart'), {
                type: 'bar',
                data: {
                    labels: dates,
                    datasets: [
                        {
                            label: 'Water (L)',
                            data: last7Days.map(d => d.water),
                            backgroundColor: '#36a2eb'
                        },
                        {
                            label: 'Sleep (hrs)',
                            data: last7Days.map(d => d.sleep),
                            backgroundColor: '#9966ff'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });

            // Consistency Chart
            charts.consistency = new Chart(document.getElementById('consistencyChart'), {
                type: 'bar',
                data: {
                    labels: dates,
                    datasets: [
                        {
                            label: 'Study (hrs)',
                            data: last7Days.map(d => d.study),
                            backgroundColor: '#4bc0c0'
                        },
                        {
                            label: 'Workout',
                            data: last7Days.map(d => d.workout ? 1 : 0),
                            backgroundColor: '#ff9f40'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { 
                            beginAtZero: true,
                            max: 5
                        }
                    }
                }
            });
        }

        function calculateStreak(history) {
            let streak = 0;
            for (let i = history.length - 1; i >= 0; i--) {
                if (history[i].workout) {
                    streak++;
                } else {
                    break;
                }
            }
            return streak;
        }

        async function shareApp() {
            const shareText = `üéØ Check out this Fitness & Study Tracker!\n\nTrack your:\n‚úÖ Nutrition (calories, protein, carbs)\n‚úÖ Water & Sleep\n‚úÖ Workouts\n‚úÖ Study Time\n\nGet instant feedback and beautiful analytics!`;
            
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: 'Fitness & Study Tracker',
                        text: shareText,
                        url: window.location.href
                    });
                } catch (err) {
                    fallbackShare();
                }
            } else {
                fallbackShare();
            }
        }

        function fallbackShare() {
            const shareText = `üéØ Fitness & Study Tracker App\n\nTo use:\n1. Save this HTML file\n2. Open in any browser\n3. Works offline!\n\nOr visit: ${window.location.href}`;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('‚úÖ Share link copied! Paste it in WhatsApp/Email to share.');
                });
            } else {
                prompt('Copy this text to share:', shareText);
            }
        }

        function saveReport() {
            const resultsDiv = document.getElementById('results');
            if (!resultsDiv.style.display || resultsDiv.style.display === 'none') {
                alert('‚ö†Ô∏è Please analyze your progress first!');
                return;
            }

            const reportText = resultsDiv.innerText;
            const date = new Date().toLocaleDateString();
            const blob = new Blob([`FITNESS & STUDY PROGRESS REPORT\nDate: ${date}\n\n${reportText}`], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `fitness-report-${date.replace(/\//g, '-')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            alert('‚úÖ Report downloaded!');
        }

        function clearData() {
            if (confirm('‚ö†Ô∏è This will delete all your progress data. Are you sure?')) {
                localStorage.removeItem('progressHistory');
                alert('‚úÖ All data cleared!');
                location.reload();
            }
        }
    </script>
</body>
</html>
